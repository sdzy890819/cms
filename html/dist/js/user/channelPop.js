define(["app","jquery","../data/getData","../moduls/Tool"],function(a,e,n,l){return{init:function(a){a.$uibModal;a.$uibModal.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"../template/template/channelPop.html",controller:function(l,t,c,i){angular.extend(l,{titelement:{close:!0},title:"编辑用户频道列表",save:function(e){a.save(e,l.data)},cancel:function(e){a.cancel(e,l.data)},select:function(e){var l=e.currentTarget;l.checked?n.userchannel.createUserChannel({userId:a.obj.userId,channelId:l.dataset.id,callback:function(a){layui.use(["layer"],function(){layui.layer.msg(a.message)})}}):n.userchannel.delUserChannel({userId:a.obj.userId,channelId:l.dataset.id,callback:function(a){layui.use(["layer"],function(){layui.layer.msg(a.message)})}})},close:function(){c.dismiss("cancel")}});var u=[];n.userchannel.userChannelIds({userId:a.obj.userId,callback:function(a){u=a.data,n.channel.listChannel({callback:function(a){e.each(a.data,function(a,n){n.ischecked=-1!=e.inArray(n.id,u)}),l.listChannelData=a.data,l.$apply()}})}})}})}}});