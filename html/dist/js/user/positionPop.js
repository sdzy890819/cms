define(["app","jquery","../data/getData","../moduls/Tool"],function(a,i,t,e){return{init:function(a){a.$uibModal;a.$uibModal.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"../template/template/positionPop.html",controller:function(e,o,n,s){angular.extend(e,{titelement:{close:!0},title:"编辑所属用户组",save:function(i){//保存
a.save(i,e.data)},cancel:function(i){//取消
a.cancel(i,e.data)},select:function(i){var e=i.currentTarget;e.checked?t.position.setUserPosition({userId:a.obj.userId,positionId:e.dataset.id,callback:function(a){layui.use(["layer"],function(){var i=layui.layer;i.msg(a.message)})}}):t.position.delUserPosition({userId:a.obj.userId,positionId:e.dataset.id,callback:function(a){layui.use(["layer"],function(){var i=layui.layer;i.msg(a.message)})}})},close:function(){n.dismiss("cancel")}});var l=[];t.position.listUserPosition({userId:a.obj.userId,callback:function(a){i.each(a.data,function(a,i){l.push(i.positionId)}),t.position.listPosition({callback:function(a){i.each(a.data,function(a,t){t.ischecked=i.inArray(t.id,l)!=-1}),e.listPositionData=a.data,e.$apply()}})}})}})}}});