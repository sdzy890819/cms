define(["app","jquery","require","../data/getData","./addForm","./edit","formlist","position","fixedNav","../moduls/service","../moduls/factory"],function(e,t,a,i,n,l){e.directive("categoryList",function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"../template/common/list.html",controller:function(e,a,d,r,c){e.title="部门列表",e.$parent.menu.push({name:e.title}),angular.extend(e,{edit:function(e){l.init({id:e.id,obj:e,list:n,updateData:function(t){t({data:e})},callback:function(e,t){t(e)},$uibModal:d})},del:function(e){a.alert({text:"您确定要删除"+e.categoryName+"吗",btn:["确定","取消"],fn:function(){i.category.delCategory(e)}}),e.callback=function(a){layui.use(["layer"],function(){layui.layer.msg(a.message),0==a.code&&t("table").find("tr[data-id="+e.id+"]").hide()})}},filter:["id"]}),i.category.listCategory({info:1,callback:function(t){var a=[{name:"分类名",key:"categoryName",width:"200"},{name:"分类说明",key:"categoryDesc"},{name:"创建人",key:"createUserName",width:60},{name:"创建时间",key:"createTimeStr",width:80},{name:"修改人",key:"lastModifyUserName",width:60},{name:"修改时间",key:"updateTimeStr",width:80},{name:"操作",width:"120",class:"center"}];e.listdata={title:e.title,table:{select:!0,th:a,td:c.setArr(t.data,a),edit:[{cls:"edit",name:"编辑",evt:e.edit},{cls:"del",name:"删除",evt:e.del}]}},c.extendChild(e.listdata.table.td,e.listdata.table.edit,"edit"),e.$apply()}})},link:function(e,t){}}})});