define(["app","jquery"],function(n,e){n.factory({GenerateArrList:function(){return{arr:function(n,c,t){var a=[];return e.each(n,function(n,i){var r={},o=0,u=[];e.each(i,function(n,a){for(var i=!1,f=0,h=c.length;f<h;f++)if(n==c[f]){i=!0;break}if(c[0].id&&c[0].id==n&&(r.id=a),i)r[n]=a;else{var s;t&&e.each(t,function(e,c){n==c.name&&((s={})[c.newName]=a)}),s?u.push(s):u.push({name:a}),r[n]=a,o++}}),r.list=u,a.push(r)}),console.log(a),a},setArr:function(n,c){var t=[],a=[];return n?(e.each(n,function(n,i){a=[],e.each(c,function(n,c){e.each(i,function(n,t){var r={};n==c.key&&(c.changeObjectName&&e.each(c.changeObjectName,function(n,e){i[e.name]&&(r[e.newName]=i[e.name])}),r.name=t,a.push(r))})}),i.list=a,t.push(i)}),t):[]},extendType:function(n,c,t){function a(c,t,a){e.each(n,function(){try{this.list[c][t]=a}catch(n){console.log("TH中的操作不在td范围内或者list[k]=null")}})}var i={},r=(t=t||[]).length;e.each(c,function(n,c){e.each(c,function(e,c){if(r){for(var o=!1,u=0;u<r;u++)if(e==t[u]){o=!0;break}o||(a(n,e,c),i[e]=c)}else i[e]=c,a(n,e,c)})})},extendChild:function(n,c,t){e.each(n,function(){this.list[t]=c})},changeTypeName:function(n,c){e.each(c,function(c,t){e.each(n,function(n,c){e.each(c,function(n,e){n==t.name&&(c[t.newName]=e)})})})}}},DataService:function(n){return{data:function(e){var c=n.defer();return e({callback:function(n){c.resolve(n)},error:function(n){c.reject(n)}}),c.promise},datas:function(c){var t=n.defer(),a=[];return e.each(c,function(n,e){e({callback:function(n){a.push(n),t.notify(a)},error:function(n){t.reject(n)}})}),t.resolve(a),t.promise}}}})});