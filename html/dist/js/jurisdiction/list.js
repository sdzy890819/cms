define(["require","app","jquery","../data/getData","./addForm",,"formlist","fixedNav","position","../moduls/service","../moduls/factory"],function(require,app,$,data,list){app.directive("jurisdictionList",function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"../template/common/list.html",controller:function($scope,pop,$uibModal,$css,GenerateArrList){$scope.title="权限列表",$scope.$parent.menu.push({name:$scope.title}),angular.extend($scope,{add:function(id){pop.alert({text:"你的ID为："+id,btn:["确定","取消"],fn:function(index){layer.close(index)}})},edit:function(obj){require(["../common/editPop"],function(pop){pop.init({obj:obj,list:list,$uibModal:$uibModal})})},del:function(id){pop.alert({text:"你的ID为："+id,btn:["确定","取消"],fn:function(index){layer.close(index)}})},permission:function(id){pop.alert({text:"你的ID为："+id,btn:["确定","取消"],fn:function(index){layer.close(index)}})},filter:[{id:"parentId"},"parentId","type","showFlag"]}),data.permission.listPermission(function(_data){$scope.listdata={title:$scope.title,table:{select:!0,th:[{name:"名称",width:"200"},{name:"说明"},{name:"url"},{name:"sort",class:"center"},{name:"permission",class:"center"},{name:"操作",width:"200",class:"center"}],td:GenerateArrList.arr(_data.data.permissions,$scope.filter),edit:[{cls:"edit",name:"设置权限",evt:$scope.permission},{cls:"edit",name:"编辑",evt:$scope.edit},{cls:"del",name:"删除",evt:$scope.del}]},submit:[{name:"全选",evt:function(id,scope,evt){scope.selectAll(evt)},icon_cls:"ok"},{name:"设置权限",evt:function(id,scope,evt){scope.delAll(function(ids){$scope.permission(ids)})},icon_cls:"edit"}]},GenerateArrList.extendType($scope.listdata.table.td,$scope.listdata.table.th,["width","name"]),GenerateArrList.extendChild($scope.listdata.table.td,$scope.listdata.table.edit,"edit"),$scope.$apply()})},link:function($scope,element){}}})});