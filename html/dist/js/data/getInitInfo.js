define(["./URL","./loginAndOut","jquery","./getData"],function(n,t,a,u){if(!window.quanjing){var e={user:null};window.quanjing=e}var i={init:function(){i.getAllInfo()},login:function(u){t.login({data:u.data,callback:function(t){a.ajax({url:n.user.currentUser+"?time="+999*Math.random(),type:"get",dataType:"json",success:function(n){e.user=n,u.callback(n)}})}})},loginOut:function(){t.loginOut()},getUserInfo:function(n){return n.callback&&n.callback()},getPublicData:function(t){a.ajax({url:n.data.all,type:"get",success:function(n){e.all=n,t&&t(n)},error:function(){}})},getAllInfo:function(n){i.getUserInfo(function(){i.getPublicData(n)})}};return i});