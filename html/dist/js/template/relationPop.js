define(["app","jquery","../data/getData","../moduls/factory","../moduls/directive"],function(app,$,getData){return{init:function(obj){var moduleId=(obj.$uibModal,obj.list,obj.obj.id);obj.$uibModal.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"../template/template/relationPop.html",windowClass:"relationPopsuper",controller:function($scope,$uibModalInstance,$css){$scope.initData=null,angular.extend($scope,{titelement:{close:!0},save:function(arr){obj.save(arr,$scope.data)},cancel:function(arr){obj.cancel(arr,$scope.data)},close:function(){$uibModalInstance.dismiss("cancel")},setTab:function(obj,tabIndex,event){var dome=(event.currentTarget,$(".relation-pop")),title=dome.find(".title li"),cnt=dome.find(".content .option");title.removeClass("current").eq(tabIndex).addClass("current"),cnt.hide().eq(tabIndex).show()},selectBox:function(event,obj,tabIndex){var tag=event.currentTarget,checked=tag.checked;1==checked?getData.template.createRelation({templateId:moduleId,relationId:obj.id,relationType:tabIndex,callback:function(){}}):getData.template.delRelation({templateId:moduleId,relationId:obj.id,relationType:tabIndex,callback:function(){}})},recommendColumnlistDone:function(){setTimeout(function(){var dome=$(".relation-pop"),cnt=(dome.find(".title li"),dome.find(".content .option"));cnt.hide().eq(0).show()},200)}}),getData.data.all({callback:function(_data){$scope.tabs=_data.data.relationType;var id=null;$.each($scope.tabs,function(){id=this.type,1==id?getData.news.relationColumnList({callback:function(_data){$scope.relationColumnListData=_data.data,$scope.$apply()}}):2==id?getData.fragment.list({callback:function(_data2){$scope.fragmentListData=_data2.data,$scope.$apply()}}):3==id?getData.topic.topicClassifyList({callback:function(_data1){$scope.topicClassifyListData=_data1.data,$scope.$apply()}}):4==id&&getData.news.recommendColumnlist({alert:!1,callback:function(_data3){$scope.recommendColumnlistData=_data3.data,$scope.$apply()}})})}}),getData.template.relation({templateId:moduleId,relationType:0,callback:function(_data){$scope.initData=_data.data}})}})},updateData:function(){}}});