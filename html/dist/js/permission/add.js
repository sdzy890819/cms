define(["app","../data/getData","./form","form","position","fixedNav"],function(t,e,i){t.directive("permissionAdd",function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"../template/common/addAndEdit.html",controller:function(t,n){t.title="新增权限",t.$parent.menu.push({name:t.title}),t.save=function(t){var i,s,a;$.each(t.selects,function(){"type"==this.title&&(i=this.id),"showFlag"==this.title&&(s=this.id),"platform"==this.title&&(a=this.id)}),e.permission.createPermission({name:t.name,description:t.description,type:i,url:t.url,sort:t.sort,parentId:t.parentId,showFlag:s,platform:a,permission:t.permission,callback:function(t){layui.use(["layer"],function(){layui.layer.msg(t.message),console.log(t),0==t.code&&n.go("permission.list")})}})},t.cancel=function(t){},t.formdata={title:t.title,list:i,submit:[{name:"提交",evt:"save",icon_cls:"save"}]}}}})});