define(["app","jquery","form"],function(t,a){return{init:function(t){t.$uibModal;var n=t.list;"array"==a.type(n)&&(n=function(a){a(t.list)}),t.$uibModal.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"../template/common/addAndEdit.html",size:t.obj.size||"lg",controller:function(e,i,l){e.data=null,angular.extend(e,{titelement:{close:!0},save:function(a){t.save(a,e.data,i),t.noclose||i.dismiss("cancel")},cancel:function(a){t.cancel(a,e.data)},close:function(){i.dismiss("cancel")}}),n(function(n){t.callback(n,function(n){e.formdata={title:"编辑",cls:"popedit",list:n,submit:[{name:"确定",evt:"save",icon_cls:"save"}]},t.updateData(function(t){function n(t){"selectSize"==t.type&&(t.toSelect=[])}e.data=t.data,window.addContent=function(a){a(t.data.newsDetail.content)},t.data.columnIds&&t.data.columnIds.length||a.each(e.formdata.list,function(t,e){"array"==a.type(e)?a.each(e,function(t,a){n(a)}):n(e)}),e.$$phase||e.$apply()})})})}})}}});