define(["app","jquery","require","../data/URL","../upload/angular-file-upload/index","wangEditor"],function(n,i,o,e,t){return{init:function(o,l){n.directive("contenteditable",function(){return{restrict:"A",require:"?ngModel",controller:function(n,i){n.$uibModal=i},link:function(n,a,r,u){if(u){u.$render=function(){a.html(u.$viewValue||"")},a.on("blur keyup change",function(){});var c=new wangEditor(a);c.config.menus=["source","|","bold","underline","italic","strikethrough","eraser","forecolor","bgcolor","|","quote","fontfamily","fontsize","head","unorderlist","orderlist","alignleft","aligncenter","alignright","|","link","unlink","table","emotion","|","indent","lineheight","img","location","insertcode","|","undo","redo","fullscreen","stock"],c.config.menus=i.map(c.config.menus,function(n,i){return"insertcode"===n?null:"fullscreen"===n?null:"location"==n?null:n});var d,f;c.config.uploadImgFns.prvonload=function(n,i){f=i.match(/\w+$/)[0],d=n,c.config.uploadParams={suffix:f,baseCode:d.split(",")[1]}},c.config.uploadImgFns.onload=function(n,o){var e=c.uploadImgOriginalName||"",t=i.parseJSON(n);c.command(null,"insertHtml",'<img src="'+t.data.imageUrl+'" alt="'+e+'" style="max-width:100%;"/>')},c.config.uploadImgFns.ontimeout=function(n){alert("上传超时")},c.config.uploadImgFns.onerror=function(n){alert("上传错误")},c.config.uploadImgUrl=e.upload.uploadImage,c.config.videoUpload=function(){t.init({data:{obj:{},title:"上传视频",name:"请选择视频",type:"video",success:function(n,i,o,e){c.command(null,"insertHtml","<video src='' width='200' height='200'></video>")},event:function(n,i){o.imageInfo=n,i.dismiss("cancel")}},$uibModal:n.$uibModal})},c.ready(function(){l.callback(c)}),c.config.jsFilter=!0,c.config.pasteFilter=!0,c.config.printLog=!1,c.create(),o.editor=c,window.Editor=c,c.$txt.html("<p>请输入内容</p>")}}}})}}});