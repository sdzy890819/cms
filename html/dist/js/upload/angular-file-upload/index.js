define(["app","jquery","../../data/URL","../../data/getData"],function(e,o,i,n){return{init:function(e){e.$uibModal,e.$uibModal.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",
//windowTemplateUrl : '../../template/common/window.html',
//template : 'asdfsadf',
templateUrl:"../template/upload/videoPop.html",size:"normal",controller:function(a,t,s,l,u){var r=!0,c=null,d=0;angular.extend(a,{close:function(){t.dismiss("cancel")},submit:function(e){1==r&&(r=!1,e.upload())},cancel:function(){o(".fileUpload").val(""),r||n.upload.cancelVideo({fileName:c,callback:function(e){o(".videoPop .progress1").css({width:"0.01%"}),o(".videoPop .progress2").css({width:"0.01%",transitionDuration:".3s"})}})}});var p=a.uploader=new u({url:i.video.uploadVideo2,method:"post"});
// FILTERS
p.filters.push({name:"customFilter",fn:function(e,o){return c=e.name,d=e.size,p.queue.shift(),this.queue.length<10}}),p.onAfterAddingFile=function(e){o(".filename").empty().append(e._file.name)},p.onProgressItem=function(e,i){//进行中
o(".videoPop .progress1").css({width:i+"%"})},p.onProgressAll=function(e){//成功
o(".videoPop .progress1").css({width:e+"%"}),o(".videoPop .progress2").css({width:"90%",transitionDuration:"100s"})},p.onErrorItem=function(e,o,i,n){layui.use(["layer"],function(){var e=layui.layer;e.msg("上传失败！"),setTimeout(function(){a.close()},300)})},p.onCompleteItem=function(i,n,a,t){e.obj&&e.obj.success&&e.obj.success(i,n,a,t);var s=o(".layui-box.layui-upload-button"),l="<span class='layui-upload-icon ng-binding ng-scope'>"+n.data.fileName+"</span>";s.attr("video-url",n.data.location),s.attr("filename",n.data.fileName),s.empty().append(l)},p.onCompleteAll=function(){o(".videoPop .progress2").css({width:"500px",transitionDuration:"10s"}),layui.use(["layer"],function(){var e=layui.layer;e.msg("上传成功！"),r=!0,setTimeout(function(){a.close()},300)})}}})}}});