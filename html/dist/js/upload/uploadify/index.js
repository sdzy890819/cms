define(["app","jquery","../../data/URL"],function(app,$,URL){return{init:function(obj){obj.$uibModal,obj.$uibModal.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"../template/upload/videoPop.html",size:"lg",controller:function($scope,$uibModalInstance,$css,$timeout,FileUploader){$scope.isUpload=!0,angular.extend($scope,{close:function(){$uibModalInstance.dismiss("cancel")},uploadSubmit:function(){},submit:function(obj){}});var uploader=$scope.uploader=new FileUploader({url:URL.video.uploadVideo2,method:"post"});uploader.filters.push({name:"customFilter",fn:function(item,options){return this.queue.length<10}}),uploader.onAfterAddingFile=function(fileItem){$scope.$apply()},uploader.onProgressItem=function(fileItem,progress){$(".videoPop .progress").show(),$(".videoPop .progress1").css({width:progress+"%"})},uploader.onProgressAll=function(progress){$(".videoPop .progress1").css({width:progress+"%"}),$(".videoPop .progress2").css({width:"90%",transitionDuration:"600s"})},uploader.onErrorItem=function(fileItem,response,status,headers){layui.use(["layer"],function(){layui.layer.msg("上传失败！")})},uploader.onCompleteAll=function(){$(".videoPop .progress2").css({width:"100%",transitionDuration:"10s"}),layui.use(["layer"],function(){layui.layer.msg("上传成功！"),isSubmit=!0,setTimeout(function(){$scope.close()},300)})}}})}}});