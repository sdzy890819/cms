// 包装函数
module.exports=function(grunt){grunt.initConfig({pkg:grunt.file.readJSON("package.json"),uglify:{options:{stripBanners:!0,banner:'/*! <%=pkg.name%>.js <%= grunt.template.today("yyyy-mm-dd") %> */\n'},build:{src:"src/js/<%=pkg.name%>.js",dest:"dist/js/<%=pkg.name%>.min.js"}},less:{editor:{src:"src/css/<%=pkg.name%>.less",dest:"src/css/<%=pkg.name%>.css"}},cssmin:{options:{stripBanners:!0,banner:'/*! <%=pkg.name%>.css <%= grunt.template.today("yyyy-mm-dd") %> */\n'},build:{src:"src/css/<%=pkg.name%>.css",dest:"dist/css/<%=pkg.name%>.min.css"}},jshint:{build:["Gruntfile.js","src/js/*.js"],options:{jshintrc:".jshintrc"}},concat:{css:{src:"src/css/parts/*.less",dest:"src/css/<%=pkg.name%>.less"},js:{src:"src/js/parts/*.js",dest:"src/js/<%=pkg.name%>.js"}},copy:{main:{files:[{expand:!0,flatten:!0,src:["src/js/*.js"],dest:"dist/js/",filter:"isFile"},{expand:!0,flatten:!0,src:["src/css/*.less"],dest:"dist/css/",filter:"isFile"},{expand:!0,flatten:!0,src:["src/css/*.css"],dest:"dist/css/",filter:"isFile"}]}},watch:{js:{files:["src/js/parts/*.js"],tasks:["concat","jshint","uglify","copy"],options:{spawn:!1}},css:{files:["src/css/parts/*.less"],tasks:["concat","less","cssmin","copy"],options:{spawn:!1}}}}),grunt.loadNpmTasks("grunt-contrib-uglify"),grunt.loadNpmTasks("grunt-contrib-less"),grunt.loadNpmTasks("grunt-contrib-concat"),grunt.loadNpmTasks("grunt-contrib-jshint"),grunt.loadNpmTasks("grunt-contrib-cssmin"),grunt.loadNpmTasks("grunt-contrib-copy"),grunt.loadNpmTasks("grunt-contrib-watch"),grunt.registerTask("default",["concat","less","jshint","uglify","cssmin","copy","watch"])};